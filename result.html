<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>ForJob</title>
	
	<script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
	
	<!-- 폰트어썸 -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
    
    <!-- 스타일 -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/sb-admin-2.min.css" rel="stylesheet">
    
    <style>
    	#navLogo{
    		font-size: 2rem;
    	}
    	
    	#navTitle{
    		font-size: 1.5rem;
		    font-weight: 800;
		    text-align: center;
		    text-transform: uppercase;
		    letter-spacing: .05rem;
    	}
    	
    	#container{
    		text-align:center;
    		padding: 8% 0 8% 0;
    	}
    	@media (max-width: 1000px) {
	    	#container{
	    		padding: 15% 0 15% 0;
	    	}
	    }
    	
    	#searchBox{
		  	display: inline-block;
    		width: 40%;
    		text-align: left;
    	}
    	@media (max-width: 1000px) {
	    	#searchBox{
    			width: 80%;
	    	}
	    }
    	
    	#searchBox input{
    		font-size: 1.2rem;
    	}
    	@media (max-width: 1000px) {
	    	#searchBox input{
	    		font-size: 5.0vw;
	    		padding: 3%;
	    	}
	    }
    	
	    .input-group-append > button > i {
	    	font-size: 1.3rem;
	    }
    	@media (max-width: 1000px) {
	    	.input-group-append > button > i {
	    		font-size: 4.0vw;
	    	}
	    }
	    
	    #linkArea {
		    display: flex;
		    justify-content: center;
	    	margin-top: 6%;
	    }
    	@media (max-width: 1000px) {
		    #linkArea {
		    	margin-top: 5%;
		    }
	    }
	    
	    .link {
	    	width: 3% !important;
	    	height: auto;
	    	float: left;
	    	margin: 0 1% 0 1%;
	    	
	    	overflow: hidden;
	    	border: 1px solid #e6e6e6;
	    }
    	@media (max-width: 1000px) {
	    	.link {
		    	width: 10% !important;
	    		margin: 0 1% 0 1%;
		    }
	    }
	    
	    .link > img {
	    	width: 100%;
	    	vertical-align: middle;
	    }
	    
	    .row {
	    	margin-top: 3%;
	    	padding: 0 5% 0 5%;
	    }
	    .card-header{
	    	font-size: 1.3vw;
	    }
    	@media (max-width: 1000px) {
	    	.row{
	    		font-size: 3.8vw;
	    		margin-top: 15%;
	    		padding: 0 7% 0 7%;
	    	}
		    .card-header{
		    	font-size: 4.5vw;
		    }
	    }
	    
	    .blank {
	    	width: 100%;
	    	text-align: center;
	    	font-size: 1.4rem;
	    	font-weight: bold;
	    }
	    
	    
	    
	    /* 잡플래닛 스타일 */
	    .jobplanet-box {
	    	display: table;
	    	position: relative;
	    	width: 100%;
	    	min-height: 80px;
	    	text-align: left;
	    	color: var(--fontcolor);
	    }
	    
	    .jobplanet-logo{
	    	width: 5vw;
	    	min-width: 80px;
	    	min-height: 80px;
	    	position: relative;
	    	
	    	display: table-cell;
	    	vertical-align: top;
	    	box-sizing: border-box;
	    }
	    
	    .jobplanet-logo > a {
	    	float: left;
	    	display: block;
	    	position: relative;
	    	
	    	overflow: hidden;
	    	width: 5vw;
	    	height: 5vw;
	    	min-width: 80px;
	    	min-height: 80px;
	    	border: 1px solid #e6e6e6;
	    	line-height: 5vw;
	    }
	    
	    .jobplanet-logo > a > img {
	    	width: 100%;
	    	vertical-align: middle;
	    }
	    
	    .jobplanet-info{
	    	display: table-cell;
	    	vertical-align: top;
	    	box-sizing: border-box;
	    	
	    	padding-left: 5%;
	    }
	    
	    .jobplanet-score {
	    	display: table-cell;
	    	text-align: center;
	    	vertical-align: middle;
	    	box-sizing: border-box;
	    	
			font-size: 1.2rem;
			font-weight: bold;
	    }
	    .jobplanet-score > span{
	    	display: block;
	    	margin: auto;
	    }
	    
	    
	    /* 사람인 스타일 */
	    .saramin-box {
	    	position: relative;
	    	width: 100%;
	    	min-height: 80px;
	    	text-align: left;
	    	color: var(--fontcolor);
	    }
	    
	    .company-name{
	    	font-weight: bold;
	    	font-size: 1.3rem;
	    }
	    
	    .section-margin{
	    	margin: 4% 0 4% 0;
	    }
	    
	    .saram-summary{
	    	display: block;
	    	text-align: center;
	    }
	    
	    .saram-summary > li{
	    	width: 25%;
	    	float: left;
	    }
	    
	    .saram-summary > li > span{
	    	font-size: 0.85rem;
	    }
	    .saram-summary > li > strong{
	    	margin-top: 5%;
	    	font-size: 1.2rem;
	    	letter-spacing: 0.04vw;
	    }
	    
	    .wrap_detail{
	    	margin: 4% 0 4% 0;
	    }
	    
	    .saram-info {
	    	text-align: left;
	    }
	    
	    .saram-info > dt {
	    	float: left;
	    	width: 13%;
	    	color: var(--lightgray);
	    	
	    	margin: 1% 0 1% 0;
	    }
	    .saram-info > dd {
	    	float: left;
	    	width: 87%;
	    	
	    	margin: 1% 0 1% 0;
	    }
    </style>
	
</head>
<body>
	<script>
		
		function sliceCode(code, start, end, type) {
			var stLength = 0;
			if(type == 0) stLength = start.length;
			// type == 0 : 시작 코드 생략
			// type != 0 : 시작 코드 포함
			
			start = code.indexOf(start)+stLength;
			return code.substring(start, code.indexOf(end, start));
		}
		
		$(function() {
			var search = ((decodeURI(location.href).split("?"))[1].split("="))[1];
			$('#searchInput').attr('value', search);
			
			<!-- 잡플래닛 -->
			var url = "https://www.jobplanet.co.kr/search/companies/" + search;
			
			$.get(decodeURI(url), function(data) {
				var code = sliceCode(data, '<section class="company content_ty3">', '</section>', 0);
				
				if(sliceCode(code, '<dt class="us_titb_l3">', '</dt>').indexOf(search) != -1) {
					
					var app = '<div class="col-lg-6"><div class="card shadow mb-4">' + 
								'<div class="card-header"><p class="m-0 font-weight-bold text-primary">' + '잡플래닛' + '</p></div>' + 
								'<div class="card-body">';
					
					code = code.replace(/<a href=\"/g, '<a target="_blank" href="https://www.jobplanet.co.kr');
					
					var logoCode = sliceCode(code, '<div class="content_col2_2">', '</div>', 0);
					app = app + '<div class="jobplanet-box"><div class="jobplanet-logo">' + logoCode + '</div>';
					$('#linkArea').append('<a id="jobplanetLink" class="link" target="_blank" href="' +
											sliceCode(logoCode, 'href="', '" class', 0) + '"><img src="./img/jobplanet.png"/></a>');
					
					var infoCode = sliceCode(code, '<dl class="content_col2_3 cominfo">', '</dl>', 0);
					infoCode = infoCode.replace(sliceCode(infoCode, '<button', '</button>', 1), '');
					app = app + '<dl class="jobplanet-info">' + infoCode + '</dl>';
					
					var score = '<span class="gfvalue">'
					app = app + '<div class="jobplanet-score"><span>평점 &nbsp;' + code.substr(code.indexOf(score)+score.length, 3) + '</span></div>';
					
					app = app + '</div></div></div>';
					$('.row').append(app);
					
					//$('.row').append(code.slice(20, -6));
				} else {
					$('.row').html('<div class="blank">검색 결과가 없습니다.</div>');
				}
			});

			
			<!-- 사람인 -->
			url = 'https://www.google.com/search?q=사람인+' + search;

			$.get(decodeURI(url), function(data) {
				var code = sliceCode(data, '<div class="yuRUbf">', '<div class="IsZvec">', 1);
				url = sliceCode(code, '<a href="', '"', 0);
				
				$.get(decodeURI(url), function(data) {
					var name = sliceCode(data, '<span class="name">', '</span>', 0);
					
					if(name.indexOf(search) != -1) {
						$('#linkArea').append('<a id="saramLink" class="link" target="_blank" href="' + url + '"><img src="./img/saramin.png"/></a>');
						
						var app = '<div class="col-lg-6"><div class="card shadow mb-4">' + 
									'<div class="card-header"><p class="m-0 font-weight-bold text-primary">' + '사람인' + '</p></div>' + 
									'<div class="card-body">';
						
						app = app + '<span class="company-name section-margin">' + name + '</span><hr/>';
						
						var summaryCode = sliceCode(data, '<ul class="summary">', '</ul>', 0);
						app = app + '<div class="saramin-box"><ul class="saram-summary section-margin">';
						
						var point = 0, targetCode = "";
						var liCount = summaryCode.match(/<li>/g).length;
						
						for(var i = 0; i < liCount; i++) {
							point = targetCode.indexOf('</li>') + 5;
							if(i == 0) targetCode = summaryCode;
							else targetCode = targetCode.slice(point);
							
							app = app + '<li>' + sliceCode(targetCode, '<span>', '</span>', 1) + '</span><br>' + 
										sliceCode(targetCode, '<strong>', '</strong>', 1) + '</strong></li>';
						}
						
						app = app + '</ul></div><hr/>';
						
						if(data.indexOf('<div class="wrap_detail">') != -1) {
							var detailCode = sliceCode(data, '<div class="detail">', '</div>', 0);
							
							if(detailCode.indexOf('<div class="hidden_text">') != -1) {
								var point = '<div class="hidden_text">';
								detailCode = detailCode.slice(detailCode.indexOf(point) + point.length);
							}
							
							app = app + '<div class="section-margin">' + detailCode + '</div><hr/>';
						}
						
						var infoCode = sliceCode(data, '<dl class="info">', '</dl>', 0);
						if(data.indexOf('<dl class="info vision">') != -1) {
							infoCode = infoCode + sliceCode(data, '<dl class="info vision">', '</dl>', 0);
						}
						
						app = app + '<dl class="saram-info section-margin">' + infoCode + '</dl>';
						
						app = app + '</div></div></div>';
						$('.row').append(app);
					} else {
						$('.row').html('<div class="blank">검색 결과가 없습니다.</div>');
					}
				});
			});
			
		});
	</script>
	
	<nav class="navbar navbar-expand navbar-light topbar mb-4 static-top shadow blue_bg">
		<a class="sidebar-brand d-flex align-items-center" href="index.html">
			<div id="navLogo" class="sidebar-brand-icon">
				<i class="far fa-building white_cl"></i>
			</div>
			<div id="navTitle" class="sidebar-brand-text white_cl">ForJob</div>
		</a>
	</nav>
	
	<div id="container">
		
		<form id="searchBox" method="get" action="result.html">
			<div class="input-group">
				<input id="searchInput" type="text" class="form-control bg-semigray border-0" name="search">
				<div class="input-group-append">
					<button class="btn blue_bg" type="submit">
						<i class="fas fa-search fa-sm white_cl"></i>
					</button>
				</div>
			</div>
			<p class="f-size mt-2">* 한글로 정확한 기업명을 입력해주세요. ( ABC→에이비씨 )</p>
		</form>
		
		<div id="linkArea">
		</div>
		 
        <div class="row">
		</div>
	</div>
</body>
</html>